# java-kanban
Repository for homework project.

## Описание
Backend трекера задач для управления задачами, эпиками и подзадачами.

## Функциональность
- Создание, обновление и удаление задач трех типов
- Автоматический расчет статуса эпика на основе подзадач
- Управление связями между эпиками и подзадачами
- Уникальная идентификация всех задач по ID
- История просмотров последних 10 задач
- Интерфейсная архитектура для гибкости реализации

## Структура репозитория

```markdown

src/
├── Main.java                               # Точка входа, тестовый сценарий
├── Tasks/                                  # Пакет для классов задач
│   ├── Task.java                           # Базовый класс задачи
│   ├── Epic.java                           # Класс эпика (наследник Task)
│   └── Subtask.java                        # Класс подзадачи (наследник Task)
├── Manager/                                # Пакет для менеджера задач
│   ├── TaskManager.java                    # Интерфейс менеджера задач
│   ├── InMemoryTaskManager.java            # Реализация менеджера задач
│   ├── HistoryManager.java                 # Интерфейс истории просмотров
│   ├── InMemoryHistoryManager.java         # Реализация истории
│   └── Managers.java                       # Утилитарный класс
└── Tools/                                  # Пакет для вспомогательных классов
    └── TaskStatus.java                     # Перечисление статусов задач

test/                                       # Тесты
├── Tasks/
│   ├── TaskTest.java
│   ├── EpicTest.java
│   └── SubtaskTest.java
└── Manager/
    ├── ManagerTest.java
    ├── TaskManagerTest.java
    └── HistoryManagerTest.java

```

## Классы задач

### Task - Базовый класс задачи
Хранит основные свойства задачи: id, название, описание и статус.

**Конструктор:** `Task(String title, String description, TaskStatus status)`

### Epic - Класс эпика
Наследуется от Task. Представляет сложную задачу, состоящую из подзадач.

**Дополнительные свойства:**
- `subtaskIds` - список ID подзадач

**Особенность:** Статус эпика рассчитывается автоматически менеджером.

### Subtask - Класс подзадачи
Наследуется от Task. Представляет задачу, относящуюся к эпику.

**Дополнительные свойства:**
- `epicId` - ID родительского эпика

## Менеджер задач

### TaskManager - Интерфейс менеджера задач
Определяет контракт для управления задачами всех типов.

### InMemoryTaskManager - Реализация менеджера задач
Централизованное управление всеми типами задач с хранением в оперативной памяти.

#### Хранение данных
- Три HashMap для раздельного хранения задач
- Уникальная генерация ID через счетчик
- Быстрый доступ O(1) по идентификатору

#### Основные методы

**Для обычных задач (Task):**
- `getTasks()` - возвращает список всех обычных задач
- `deleteAllTasks()` - удаляет все обычные задачи
- `getTask(int id)` - возвращает задачу по её идентификатору
- `createTask(Task task)` - создаёт новую задачу, присваивает уникальный ID
- `updateTask(Task task)` - обновляет существующую задачу
- `deleteTask(int id)` - удаляет задачу по идентификатору

**Для эпиков (Epic):**
- `getEpics()` - возвращает список всех эпиков
- `deleteAllEpics()` - удаляет все эпики и их подзадачи
- `getEpic(int id)` - возвращает эпик по его идентификатору
- `createEpic(Epic epic)` - создаёт новый эпик, присваивает уникальный ID
- `updateEpic(Epic epic)` - обновляет название и описание эпика (статус не обновляется)
- `deleteEpic(int id)` - удаляет эпик и все его подзадачи

**Для подзадач (Subtask):**
- `getSubtasks()` - возвращает список всех подзадач
- `deleteAllSubtasks()` - удаляет все подзадачи и обновляет статусы эпиков
- `getSubtask(int id)` - возвращает подзадачу по её идентификатору
- `createSubtask(Subtask subtask)` - создаёт новую подзадачу с проверкой существования эпика
- `updateSubtask(Subtask subtask)` - обновляет подзадачу с обработкой изменения epicId
- `deleteSubtask(int id)` - удаляет подзадачу и обновляет статус её эпика

**Дополнительные методы:**
- `getEpicSubtasks(int epicId)` - возвращает все подзадачи определённого эпика
- `getHistory()` - возвращает последние просмотренные задачи

### Расчет статуса эпика
Статус автоматически пересчитывается при изменении подзадач:

1. Нет подзадач → NEW
2. Все подзадачи NEW → NEW
3. Все подзадачи DONE → DONE
4. Остальные случаи → IN_PROGRESS

## История просмотров

### HistoryManager - Интерфейс менеджера истории
Определяет контракт для управления историей просмотров задач.

### InMemoryHistoryManager - Реализация менеджера истории
Хранит последние 10 просмотренных задач в оперативной памяти.

#### Особенности работы истории:
- Добавляет задачу в историю при вызове getTask(), getEpic(), getSubtask()
- Допускает дублирование задач в истории
- Возвращает задачи в порядке их просмотра
- Ограничена 10 последними просмотрами

#### Основные методы:
- `add(Task task)` - помечает задачу как просмотренную
- `getHistory()` - возвращает список просмотренных задач

## Утилитарный класс

### Managers - Фабричный класс
Предоставляет методы для получения экземпляров менеджеров.

#### Методы:
- `getDefault()` - возвращает реализацию TaskManager
- `getDefaultHistory()` - возвращает реализацию HistoryManager

## TaskStatus - Перечисление статусов
Тип данных `enum`:

- `NEW` - задача создана
- `IN_PROGRESS` - задача выполняется
- `DONE` - задача завершена

## Особенности реализации
- Наследование Epic и Subtask от Task
- Интерфейсная архитектура для гибкости реализации
- Инкапсуляция полей с доступом через геттеры/сеттеры
- Проверки целостности данных и обработка ошибок
- Эффективное хранение в HashMap с быстрым доступом по ID
- История просмотров с автоматическим добавлением задач

## Тестирование
Проект покрыт юнит-тестами с использованием JUnit:
- Проверка равенства задач с одинаковым ID
- Проверка невозможности добавления эпика в качестве подзадачи к самому себе
- Проверка работы истории просмотров (допускаются дубли)
- Проверка ограничения истории 10 задачами
- Проверка автоматического расчета статуса эпика
- Проверка неизменности задачи при добавлении в менеджер
- Проверка работы утилитарного класса

## Версии
Актуальные версии:
- Sprint 4 Version 1.0.0 - базовая версия backend task manager.
- Sprint 5 Version 2.0.0 - добавлен интерфейс и история просмотров, выполнено покрытие тестами, произведен рефакторинг кода.